<StartupScreen>:
    name: 'startup'
    MDIconButton:
        icon: "arrow-left"
        pos_hint: {"center_y": 0.95}
        theme_text_color: "Custom"
        on_press: root.manager.current = 'dashboard'   
    Image:
        source: "images\GoalMaster_logo1.png"
        pos_hint: {"center_x": 0.5, "center_y": 0.70}
    MDLabel:
        text: "Welcome!"
        halign: "center"
        pos_hint: {"center_x": 0.5, "center_y": 0.35}
        text_color: "011F4B"
        font_style: "Display"
        role: "small"

    MDLabel:
        text: "PRESS HERE TO START YOUR JOURNEY"
        halign: "center"
        pos_hint: {"center_x": 0.5, "center_y": 0.30}
        text_color: "011F4B"
        font_style: "Body"
        role: "medium"

    MDButton:
        style: "filled"
        pos_hint: {'center_x':0.5,'center_y':0.20}
        on_press: root.manager.current = 'startup1'
        MDButtonText:
            text: "START"
            theme_text_color: "Custom"
            text_color: "ffffff"

<Startup1Screen>
    name: 'startup1'
    Screen:
        MDLabel:
            text: "Welcome to"

            font_size: "20dp"
            halign: "center"
            pos_hint: {"center_x": 0.5, "center_y": 0.92}
            text_color: "011F4B"

        MDLabel:
            text: "Goal Master"
            font_size: "70dp"
            halign: "center"
            font_style: "Display"
            role: 'small'
            pos_hint: {"center_x": 0.5, "center_y": 0.85}
            bold: True
            text_color: "011F4B"
            font_name: 'Roboto-Black.ttf'

        Image:
            source: "images\GoalMaster.png"
            pos_hint: {"center_x": 0.5, "center_y": 0.65}
            size_hint: .8, .8

        MDLabel:
            font_size: "14sp"
            text: "Goal Master is a user-friendly financial management app that empowers individuals to set and achieve personalized savings goals with a comprehensive dashboard and easy tracking features."
            pos_hint: {"center_x": 0.5, "center_y": 0.39}
            -text_size: root.width - dp(100), None    
            halign: 'center'
            font_name: 'Roboto-Regular.ttf'

        MDButton:
            style: "tonal"
            size_hint: .66, .065
            pos_hint: {"center_x": 0.5, "center_y": 0.12}
            halign: 'center'
            on_press: root.manager.current = 'signup' 
            MDButtonText:
                text: "Next"
                theme_text_color: "Custom"
                text_color: "011F4B"
        
        MDButton:
            style: "text"
            text_color: '#808080'
            line_color: 0, 0, 0, 0
            pos_hint: {"center_x": 0.5,"center_y": 0.05}
            on_press: root.manager.current = 'login'
            MDButtonText:
                text: "Skip"
                theme_text_color: "Custom"
                text_color: "011F4B"


<CreategoalScreen>
    name: 'creategoal'
    Screen:
        MDLabel:
            text: "Create Goal:"
            font_size: "20dp"
            font_style: 'Display'
            role: 'small'
            halign: "center"
            pos_hint: {"center_x": 0.5, "center_y": 0.8}
            text_color: "011F4B"
        MDTextField:
            id: goal_name
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .7}
            mode: 'outlined'
            MDTextFieldHintText:
                text: "Name of your Goal"

        MDTextField:
            id: goal_amount
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .59}
            mode: 'outlined'
            MDTextFieldHintText:
                text: "Amount you want to save"

        MDTextField:
            id: goal_duration
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .48}           
            text: "2025-12-31"
            mode: 'outlined' 
            MDTextFieldHintText:
                text: "Deadline/Duration"
            
        MDButton:
            style: "tonal"
            size_hint: .66, .065
            md_bg_color: 0.0039, 0.1216, 0.2941, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.13}
            halign: 'center'
            on_press: 
                root.add_goal()
                root.manager.current = 'dashboard' 
            MDButtonText:
                text: "Start Journey"
                theme_text_color: "Custom"
                text_color: "011F4B"
        MDButton:
            style: "text"
            text_color: '#808080'
            line_color: 0, 0, 0, 0
            pos_hint: {"center_x": 0.5,"center_y": 0.06}
            on_press: root.manager.current = 'dashboard'
            MDButtonText:
                text: "Skip"
                theme_text_color: "Custom"
                text_color: "011F4B"

<SignupScreen1>
    name: 'signup1'
    Screen:
        MDIconButton:
            icon: "arrow-left"
            pos_hint: {"center_y": 0.95}
            theme_text_color: "Custom"
            on_press: root.manager.current = 'dashboard'
        MDLabel:
            text: "Create Account:"
            font_size: "20dp"
            font_style: "Display"
            role: "small"
            halign: "center"
            pos_hint: {"center_x": 0.5, "center_y": 0.80}
            text_color: "011F4B"
        MDTextField:
            id: name
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .7}
            mode: 'outlined'
            icon_right: "account"
            write_tab: False
            helper_text_mode: "on_error"
            helper_text: "This field is required"
            MDTextFieldHintText:
                text: "Name"
            
        MDTextField:
            id: password
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .59}
            mode: 'outlined'
            icon_right: "account"
            write_tab: False
            helper_text_mode: "on_error"
            helper_text: "This field is required"
            MDTextFieldHintText:
                text: "Password"

        MDTextField:
            id: email
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .48} 
            mode: 'outlined'
            icon_right: "account"
            write_tab: False
            helper_text_mode: "on_error"
            helper_text: "This field is required"
            MDTextFieldHintText:
                text: "Email"

        MDButton:
            id: sgnup_btn
            style: "tonal"
            text: "Sign up"
            size_hint: .66, .065
            md_bg_color: 0.0039, 0.1216, 0.2941, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.12}
            halign: 'center'
            on_press: 
                root.create_user() 
            MDButtonText:
                text: "Create"
                theme_text_color: "Custom"
                text_color: "011F4B"

<SignupScreen>
    name: 'signup'
    Screen:
        MDIconButton:
            icon: "arrow-left"
            pos_hint: {"center_y": 0.95}
            theme_text_color: "Custom"
            on_press: root.manager.current = 'startup1'
        MDLabel:
            text: "Sign Up"
            font_size: "20dp"

            font_style: "Display"
            role: "small"
            halign: "center"
            pos_hint: {"center_x": 0.5, "center_y": 0.80}
            text_color: "011F4B"
        MDTextField:
            id: name
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .7}
            mode: 'outlined'
            icon_right: "account"
            write_tab: False
            helper_text_mode: "on_error"
            helper_text: "This field is required"
            MDTextFieldHintText:
                text: "Name"
            
            



        MDTextField:
            id: password
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .59}
            mode: 'outlined'
            icon_right: "account"
            write_tab: False
            helper_text_mode: "on_error"
            helper_text: "This field is required"
            MDTextFieldHintText:
                text: "Password"

        MDTextField:
            id: email
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .48} 
            mode: 'outlined'
            icon_right: "account"
            write_tab: False
            helper_text_mode: "on_error"
            helper_text: "This field is required"
            MDTextFieldHintText:
                text: "Email"

        MDButton:
            id: sgnup_btn
            style: "tonal"
            text: "Sign up"
            size_hint: .66, .065
            md_bg_color: 0.0039, 0.1216, 0.2941, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.12}
            halign: 'center'
            on_press: 
                root.create_user() 
            MDButtonText:
                text: "Sign Up"
                theme_text_color: "Custom"
                text_color: "011F4B"
        
        MDButton:
            style: "tonal"
            text: "Log In"
            line_color: 0, 0, 0, 0
            pos_hint: {"center_x": 0.5,"center_y": 0.05}
            on_press: root.manager.current = 'login'
            MDButtonText:
                text: "Login"
                theme_text_color: "Custom"
                text_color: "005B96"

<LoginScreen>
    name: 'login'
    Screen:
        MDIconButton:
            icon: "arrow-left"
            pos_hint: {"center_y": 0.95}
            #theme_text_color: "Custom"
            on_press: root.manager.current = 'signup'
        MDLabel:
            text: "Login"
            font_style: "Display"
            role: "small"
            halign: "center"
            pos_hint: {"center_x": 0.5, "center_y": 0.8}
            text_color: "011F4B" 
            theme_text_color: 'Primary'       

        MDTextField:
            id: login_email
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .7} 
            mode: 'outlined'
            write_tab: False
            MDTextFieldHintText:
                text: "Email"
            MDTextFieldTrailingIcon:
                icon: "account"


        MDTextField:
            id: login_password
            size_hint_x: .7
            pos_hint: {"center_x": .5, "top": .59}
            password: True
            mode: 'outlined'
            write_tab: False
            MDTextFieldHintText:
                text: "Password"
            MDTextFieldTrailingIcon: #not pindutable, but should be
                icon: "eye-off"
        
        
        MDBoxLayout:
            size_hint: .5, None
            pos_hint: {"center_x": .5, "top": .45}

            MDCheckbox:
                id: keepmeloggedin
            
            MDLabel:
                text: "Keep me logged in"

        MDBoxLayout:
            size_hint: .5, None
            pos_hint: {"center_x": .5, "top": .45}

            MDCheckbox:
                id: keepmeloggedin
            
            MDLabel:
                text: "Keep me logged in"


        MDButton:
            style: "tonal"
            size_hint: .66, .065
            md_bg_color: 0.0039, 0.1216, 0.2941, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.42}
            halign: 'center'
            on_press: 
                root.user_login()
                root.manager.current = 'creategoal' if root.successful_login else 'login'

            MDButtonText:
                text: "Login"
                theme_text_color: "Custom"
                text_color: "005B96"   
        MDButton:
            style: "text"
            size_hint: .60, .055
            line_color: 0, 0, 0, 0
            pos_hint: {"center_x": 0.5,"center_y": 0.30}
            on_press: root.manager.current = 'login'
            MDButtonText:
                text: "Forgot Password"
                theme_text_color: "Custom"
                text_color: "005B96"

<DashboardScreen>
    name: 'dashboard'

    BoxLayout:
        orientation: 'vertical'

        MDTopAppBar: 
            type: 'small' 
            theme_bg_color: 'Custom'
            md_bg_color: 'b3cde0'

            MDTopAppBarLeadingButtonContainer:
                MDActionTopAppBarButton:
                    icon: "menu"
                    md_icon_color: "005B96"
                    on_release: nav_drawer.set_state("toggle")
            
            MDTopAppBarTitle:
                text: "Dashboard"
                theme_text_color: "Custom"
                text_color: "005B96"
                pos_hint: {"center_x": .5}

            MDTopAppBarTrailingButtonContainer:
                MDActionTopAppBarButton:
                    icon: "account"
        
        MDFloatLayout:
            MDCard:
                style: "outlined"
                pos_hint: {"center_x": .50, "center_y": .82}
                padding: "4dp"
                size_hint: None, None
                size: "300dp", "150dp"
                on_press: root.switch_to_tracker()
                theme_bg_color: 'Custom'
                md_bg_color: 'b3cde0'
            
                MDRelativeLayout:

                    MDLabel:
                        text: "See all"                          
                        # icon: "dots-vertical"
                        pos: "230dp", "51dp"
                        font_style: "Label"
                        role: "medium"

                    MDLabel:
                        text: "Tracker"
                        adaptive_size: True
                        color: "grey"
                        pos: "15dp", "113dp"
                        bold: True

                    MDNavigationDrawerDivider:
                        pos: "0dp", "100dp"
                        color: "ffffff"

                    MDLabel:
                        text: "Allowance:"
                        adaptive_size: True
                        color: "grey"
                        pos: "15dp", "55dp"
                        font_style: "Title"
                        role: "small"

                        MDLabel:
                            text: "Php 500"
                            adaptive_size: True
                            color: "blue"
                            bold: True
                            pos: "15dp", "30dp"
                            font_style: "Title"
                            role: "large"
                        
            MDCard:
                style: "outlined"
                pos_hint: {"center_x": .50, "center_y": .52}
                padding: "4dp"
                size_hint: None, None
                size: "300dp", "150dp"
                on_press: root.switch_to_piggy()

                MDRelativeLayout:
                    
                    MDLabel:
                        text: "See all"                          
                        # icon: "dots-vertical"
                        pos: "230dp", "51dp"
                        font_style: "Label"
                        role: "medium"

                    MDLabel:
                        text: "Piggy Bank"
                        adaptive_size: True
                        color: "grey"
                        pos: "15dp", "113dp"
                        bold: True

                    MDNavigationDrawerDivider:
                        pos: "0dp", "100dp"
                        color: "black"

                    MDLabel:
                        text: "Total Savings:"
                        adaptive_size: True
                        color: "grey"
                        pos: "15dp", "55dp"
                        font_style: "Title"
                        role: "small"

                        MDLabel:
                            text: "Php 500"
                            adaptive_size: True
                            color: "blue"
                            bold: True
                            pos: "15dp", "30dp"
                            font_style: "Title"
                            role: "large"
            
            

    MDNavigationDrawer:
        id: nav_drawer
        radius: 0, dp(5), dp(5), 0

        MDNavigationDrawerMenu:

            DrawerItem:
                id: add_account_button
                icon: "plus"
                text: "Add Account"
                on_release: 
                    nav_drawer.set_state("close")
                    root.manager.current = 'signup1'                                                   
            
            MDNavigationDrawerDivider:
                
            DrawerItem:
                id: pin_button
                icon: "pin"
                text: "Pinned Transaction"
            
            MDNavigationDrawerDivider:
                
            DrawerItem:
                id: add_goal_button
                icon: "flag"
                text: "Add Goal"
                on_press: root.manager.current = 'creategoal'
            
            MDNavigationDrawerDivider:
                
            DrawerItem:
                id: log_out_button
                icon: "exit-to-app"
                text: "Log out"
                on_press:
                    nav_drawer.set_state("close") 
                    root.log_out()
                    app.root.current = 'login'
                    
<DrawerItem>

    MDNavigationDrawerItemLeadingIcon:
        icon: root.icon
        theme_icon_color: "Custom"
        icon_color: "#4a4939"

    MDNavigationDrawerItemText:
        text: root.text
        theme_text_color: "Custom"
        text_color: "#4a4939"


<DrawerLabel>
    adaptive_height: True
    padding: "18dp", 0, 0, "12dp"

    MDNavigationDrawerItemLeadingIcon:
        icon: root.icon
        theme_icon_color: "Custom"
        icon_color: "#4a4939"
        pos_hint: {"center_y": .5}

    MDNavigationDrawerLabel:
        text: root.text
        theme_text_color: "Custom"
        text_color: "#4a4939"
        pos_hint: {"center_y": .5}
        padding: "6dp", 0, "16dp", 0
        theme_line_height: "Custom"
        line_height: 0


<TrackerScreen>
    name: 'tracker'
    Screen:

    BoxLayout:
        orientation: "vertical"
        
        MDTopAppBar: 
            type: 'small'

            MDTopAppBarLeadingButtonContainer:
                MDActionTopAppBarButton:
                    icon: "arrow-left"
                    on_press: root.manager.current = 'dashboard'
            
        MDBoxLayout:
            orientation: "vertical"

            MDLabel: 
                padding: 2   
                size_hint: (1, None)
                valign: "top"
                halign: "center"
                font_style: "Headline"
                text: "EXPENSES"
                type: 'large'

            MDLabel: 
                id: total_expenses
                padding: 2     
                size_hint: (1, None)
                valign: "top"
                halign: "center"
                font_style: "Body"
                text: "Total Expenses: Php 500"

            MDFloatLayout:
        
                MDCard:
                    size_hint: None, None
                    size: "340dp", "300dp"  
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                    MDRecycleView:   
                        id: expense_table
                        key_viewclass: 'viewclass'
                        key_size: 'height'

                        RecycleBoxLayout:
                            padding: dp(10)
                            spacing: dp(10)
                            default_size: None, dp(30)
                            default_size_hint: 1, None
                            size_hint_y: None
                            height: self.minimum_height
                            orientation: "vertical"
            
            MDBottomAppBar:
                allow_hidden: True
                type: "medium"
                theme_bg_color: 'Custom'
                md_button_color: 'b3cde0'
                

                MDFabBottomAppBarButton:
                    pos_hint: {"center_x": .5}
                    icon: "plus"
                    
                    on_press: root.manager.current = 'createexpenses'
            #MDBoxLayout:
                #spacing: 20
                #size_hint: (1, None)

                #MDIconButton: 
                    #icon: "plus"
                    #style: "filled"
                    #on_press: root.manager.current = 'createexpenses'

<CreateexpensesScreen>
    name: 'createexpenses'
   
    MDBoxLayout:
        orientation: 'vertical'
            
        MDTopAppBar: 
            type: 'small'
            theme_bg_color: 'Custom'
            md_bg_color: 'b3cde0'

            MDTopAppBarLeadingButtonContainer:

                MDActionTopAppBarButton:
                    icon: "arrow-left"
                    md_icon_color: "005B96"
                    on_release: root.manager.current = 'tracker'
            
            MDTopAppBarTitle:
                text: "Add Expenses"
                theme_text_color: "Custom"
                text_color: '111416'
                pos_hint: {"center_x": .5}

        MDFloatLayout:
            orientation: "vertical"
            size_hint_x: .8
            halign: "center"

            

            MDTextField:
                id: expense_name
                pos_hint: {"center_x": .6, "center_y": .9}
                
                
                MDTextFieldHintText:
                    text: "Name"

                MDTextFieldHelperText:
                    text: "Enter the name of your expenses"
            
            MDTextField:
                id: expense_amount
                pos_hint: {"center_x": .6, "center_y": .75}

                MDTextFieldHintText:
                    text: "Price"

                MDTextFieldHelperText:
                    text: "Enter the amount of your expenses"

            MDButton:
                style: "elevated"
                pos_hint: {"center_x": .6, "center_y": .6}
                on_press: root.add_expenses()

                MDButtonIcon:
                    icon: "plus"
                    theme_icon_color: "Custom"
                    icon_color: "blue"

                MDButtonText:
                    text: "Add Expenses"
                    
                        


            MDTextField:
                id: expense_id
                pos_hint: {"center_x": .6, "center_y": .42}

                MDTextFieldHintText:
                    text: "ID"

                MDTextFieldHelperText:
                    mode: "on_error"
                    text: "Enter a number"   
            MDButton:
                style: "elevated"
                pos_hint: {"center_x": .6, "center_y": .3}

                MDButtonIcon:
                    icon: "delete"
                    theme_icon_color: "Custom"
                    icon_color: "blue"

                MDButtonText:
                    text: "Delete"
            
            
            


<PiggyScreen>
    name: 'piggy'
    Screen:

    MDBoxLayout:
        orientation: 'vertical'
        

        MDTopAppBar: 
            type: 'small'
            theme_bg_color: 'Custom'
            md_bg_color: 'b3cde0'


            MDTopAppBarLeadingButtonContainer:

                MDActionTopAppBarButton:
                    icon: "arrow-left"
                    md_icon_color: "005B96"
                    on_release: root.switch_to_dashboard()
            
            MDTopAppBarTitle:
                text: "Piggy Bank"
                theme_text_color: "Custom"
                text_color: '111416'
                pos_hint: {"center_x": .5}

        

        MDFloatLayout:
            #pos_hint: {"center_x": .50, "center_y": .7}
            MDLabel:
                id: goal_name
                text: "iPhone"
                text_color: "011F4B"
                halign: 'center'
                pos_hint: {"center_y": 0.8}
                font_style: "Headline"
                role: "large"
                bold: "True"

        MDFloatLayout:
        
            FitImage:
                source: "images/piggy_pic.png"
                size_hint_y: 1
                pos_hint: {"center_y": 1.2, 'center_x': 0.5}
                radius: "10dp", "10dp", 0, 0
                size_hint: None, None
                size: dp(240), dp(240)  # Set the desired size

            MDCard:
                style: 'filled'
                pos_hint: {"center_x": .50, "center_y": .04}
                padding: "4dp"
                size_hint: None, None
                size: "300dp", "150dp"
                theme_bg_color: 'Custom'
                md_bg_color: 'b3cde0'
                
                MDRelativeLayout:
                    MDLabel:
                        text: 'Savings'
                        halign: 'center'
                        pos_hint: {'center_y': 0.88}
                        font_style: "Title"
                        role: "medium"
                    
                        
                    MDLabel:
                        id: savings_amount
                        text: 'P10 000'
                        halign: 'center'
                        pos_hint: {'center_y': 0.65}
                        font_style: "Headline"
                        role: "large"
                        bold: "True"
                    

                    MDLabel:
                        text: 'Deadline'
                        halign: 'center'
                        pos_hint: {'center_y': 0.39}
                        font_style: "Title"
                        role: "medium"


                    MDLabel:
                        id: dline_date
                        text: 'Feb 17, 2024'
                        halign: 'center'
                        pos_hint: {'center_y': 0.19}
                        font_style: "Headline"
                        role: "medium"
                        bold: "True"

        MDFloatLayout:
         
            MDButton:
                style: 'text'
                pos_hint: {"center_x": 0.5, "center_y": 0.2}
                on_release: root.switch_to_history_piggy()
                MDButtonText:
                    text: "Transactions"
                    font_style: "Title"
                    role: "large"
                    theme_text_color: 'Custom'
                    text_color:'grey'

<HistoryScreen_Piggy>
    name: 'history_piggy'
    MDFloatLayout

        MDIconButton:
            icon: "arrow-left"
            pos_hint: {'center_x': 0.1, 'center_y': 0.95}
            style: 'filled'
            on_press: root.switch_to_piggy()
            theme_bg_color: 'Custom'
            md_bg_color: 'bad2e3'

        MDLabel:
            text: 'Transactions'
            halign:'center'
            pos_hint: {'center_y': 0.9}
            font_style: 'Display'
            role: 'small'

    MDFloatLayout:
        MDCard:
            style: 'filled'
            pos_hint: {"center_x": .50, "center_y": .45}
            padding: "4dp"
            size_hint: None, None
            size: "300dp", "500dp"
            theme_bg_color: 'Custom'
            md_bg_color: 'b3cde0'

            MDRelativeLayout:
                MDIconButton:
                    icon: "arrow-left"
                    pos_hint: {'center_x': 0.5, 'center_y': 0.1}
                    style: 'filled'
                    on_press: root.switch_to_piggy()
                    theme_bg_color: 'Custom'
                    md_bg_color: 'ffffff'








        
            


            


    

